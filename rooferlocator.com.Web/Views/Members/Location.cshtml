@using Abp.Web.Mvc.Extensions
@using rooferlocator.com.MultiTenancy
@model rooferlocator.com.Common.Members.Dtos.GetMembersOutput
@section scripts
{
@Html.IncludeScript("~/Views/Members/Location.js")
}

<div ng-controller="app.views.common.types.location.list as vm">
    <div class="portlet box red-soft">
        <div class="portlet-title">
            <div class="caption">
                <i class="glyphicon glyphicon-star-empty"></i>
                <span>Location(city) Management</span>
            </div>
            <div class="actions">
                <div class="btn-group">
                    <a class="btn btn-circle btn-default btn-sm" ng-click="showDetails()" data-toggle="dropdown">
                        <i class="fa fa-plus-circle"></i> Add
                    </a>
                </div>
                <div class="portlet-input input-inline input-medium">
                    <div class="form-body">
                        <select class="form-control"
                                id="drpStates"
                                ng-options="location as location.state for location in vm.states "
                                ng-model="item"
                                ng-change="vm.getCities(item)">
                            <option value="">-- Select State--</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
        <!--BEGIN LOCATIONS LIST-->
        <div id="List" class="portlet-body form " style="display:block;">
            <div class="portlet-body form ">
                <form role="form">
                    @*<div ng-if="vm.locations>0">*@
                    <div class="table-responsive">
                        <table class=" table table-striped table-bordered table-hover">
                            <thead class="flip-content">
                                <tr>
                                    <th>
                                        <h6>City</h6>
                                    </th>
                                    <th>
                                        <h6>State</h6>
                                    </th>
                                    <th>
                                        <h6>Action</h6>
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="types in vm.locations">
                                    <td><b>{{types.city}}</b></td>
                                    <td><b>{{types.state}}</b></td>
                                    <td style="margin:0px;">
                                        <button ng-click="showDetails(types)" type="button" class="btn red"> <i class="fa reload"></i> Edit</button>
                                        <button ng-click="vm.deleteItem(types)" type="button" class="btn red"> <i class="fa reload"></i> Delete</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    @*</div>*@
                </form>
            </div>
        </div>
        <!--END LOCATIONS LIST-->
        <!--BEGIN LOCATIONS DETAILS-->
        <div id="Details" class="portlet-body form " style="display:none;">
            <div class="portlet-body form ">
                <form role="form">
                    <div id="dCity" class="form-body col-lg-12 col-md-12 col-sm-12 col-xs-12">
                        <label>City</label>
                        <input type="text" class="form-control" ng-model="vm.selectedLocation.city" />
                    </div>
                    <div id="dState" class="form-body col-lg-12 col-md-12 col-sm-12 col-xs-12">
                        <label>State</label>
                        <select class="form-control"
                                id="drpStates2"
                                ng-options="location as location.state for location in vm.states "
                                ng-model="vm.selectedLocation.state">
                            <option value="">-- Select State--</option>
                        </select>
                    </div>
                    <button ng-click="vm.saveType()" type="button" class="btn red"> <i class="fa fa-plus"></i> Add Location</button>
                    <button ng-click="showList()" type="button" class="btn red"> <i class="fa "></i> Cancel</button>
                </form>
            </div>
            <!--END LOCATIONS DETAILS-->
        </div>
        <!--END LOCATIONS DETAILS-->
    </div>
</div>